{% extends "base.html" %}
{% block content %}
<h1>My Applications</h1>
<table class="table">
  <thead>
    <tr>
      <th>Thesis</th>
      <th>Supervisor</th>
      <th>Date</th>
      <th>Status</th>
      <th>Motivation</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
  {% for a in applications %}
    <tr>
      <td><a href="{% url 'thesis-detail' a.thesis.pk %}">{{ a.thesis.title }}</a></td>
      <td>{{ a.thesis.supervisor.username }}</td>
      <td>{{ a.application_date }}</td>
      <td>{{ a.get_status_display }}</td>
      <td>{{ a.motivation|default:"—" }}</td>
      <td>
        {% if a.status == "pending" %}
          <form method="post" action="{% url 'withdraw-application' a.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger">Withdraw</button>
          </form>
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="6">No applications</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
